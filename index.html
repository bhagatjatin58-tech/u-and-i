<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Anniversary ‚ù§Ô∏è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: #fff; overflow: hidden; height: 100vh; width: 100vw; font-family: 'Courier New', Courier, monospace; }
        
        .part { height: 100vh; width: 100vw; position: absolute; top: 0; left: 0; display: flex; justify-content: center; align-items: center; visibility: hidden; opacity: 0; transition: opacity 0.8s; }
        .active { visibility: visible; opacity: 1; z-index: 10; }
        
        .bg-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; z-index: -1; transform: translate(-50%, -50%); object-fit: cover; filter: brightness(50%); }
        
        /* Blur Content Style */
        .content { 
            position: relative; z-index: 20; 
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            padding: 25px; border: 1px solid rgba(255, 255, 255, 0.2); 
            border-radius: 20px; text-align: center; 
            max-width: 500px; width: 90%; max-height: 85vh; display: flex; flex-direction: column; 
        }

        .scroll-area { overflow-y: auto; margin-bottom: 10px; text-align: left; }
        h1 { font-family: 'Brush Script MT', cursive; font-size: 2.2rem; margin-bottom: 12px; color: #ff4b2b; }
        .type-txt { font-size: 1rem; line-height: 1.5; font-weight: bold; color: #fff; }
        
        .btn { background: #ff4b2b; color: #fff; border: none; padding: 12px 25px; font-weight: bold; cursor: pointer; border-radius: 50px; margin-top: 10px; transition: 0.3s; align-self: center; }

        /* Heart Rain */
        .heart-rain { position: absolute; color: red; font-size: 20px; top: -50px; animation: fall linear forwards; z-index: 5; pointer-events: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        #val-box { background: rgba(255, 240, 240, 0.9); border: 2px dashed #ff4b2b; padding: 15px; margin-top: 15px; border-radius: 15px; color: #333; display: none; }
        .val-btns { position: relative; height: 60px; margin-top: 10px; }
        #no-btn { position: absolute; transition: 0.1s; left: 55%; }
        #yes-btn { position: absolute; left: 10%; }
        
        /* Game Styles */
        #game-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 100; display: none; }
        #game-ui { position: fixed; top: 20px; width: 100%; text-align: center; color: white; font-size: 20px; z-index: 101; display: none; }
        
        .coupon { background: #fff; border: 5px gold double; padding: 30px; border-radius: 20px; text-align: center; color: #8b0000; display: none; z-index: 110; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85%; max-width: 400px; }
    </style>
</head>
<body>

    <audio id="myMusic" loop><source src="mylovee.mp3" type="audio/mpeg"></audio>

    <div class="part active" id="start-screen" style="background: #1a0000;">
        <div class="content">
            <h1>Our Love Story ‚ù§Ô∏è</h1>
            <p class="type-txt">Click to enter the journey I made for you.</p>
            <button class="btn" onclick="go()">Start ‚ú®</button>
        </div>
    </div>

    <div class="part" id="p1">
        <video class="bg-video" id="v1" loop muted playsinline><source src="video1.mp4" type="video/mp4"></video>
        <div class="content">
            <h1>Our Beginning ‚ù§Ô∏è</h1>
            <div class="scroll-area"><p class="type-txt" id="m1"></p></div>
            <button class="btn" onclick="nxt('p2', 'v2', 'm2')">Next üëâ</button>
        </div>
    </div>

    <div class="part" id="p2">
        <video class="bg-video" id="v2" loop muted playsinline><source src="video2.mp4" type="video/mp4"></video>
        <div class="content">
            <h1>Memories ‚ú®</h1>
            <div class="scroll-area"><p class="type-txt" id="m2"></p></div>
            <button class="btn" onclick="nxt('p3', 'v3', 'm3')">Last Page üéÅ</button>
        </div>
    </div>

    <div class="part" id="p3">
        <video class="bg-video" id="v3" loop muted playsinline><source src="video3.mp4" type="video/mp4"></video>
        <div class="content">
            <h1>Forever Yours üíç</h1>
            <div class="scroll-area"><p class="type-txt" id="m3"></p></div>
            <div id="val-box">
                <p style="font-weight: bold;">Will you be my Valentine?</p>
                <div class="val-btns">
                    <button id="yes-btn" class="btn" onclick="startArchery()">YES! üèπ</button>
                    <button id="no-btn" class="btn" style="background:#555" onmouseover="moveNo()">NO</button>
                </div>
            </div>
        </div>
    </div>

    <div id="game-ui">‚ù§Ô∏è Hearts Hit: <span id="score">0</span>/3<br><small>Tap & Release to Shoot!</small></div>
    <canvas id="game-canvas"></canvas>

    <div class="coupon" id="final-coupon">
        <h1>üéüÔ∏è DATE COUPON</h1>
        <p style="margin: 15px 0;">You've won a special date with Jatin!</p>
        <p><strong>1 Full Day of Unlimited Hugs & Your Fav Food!</strong></p>
    </div>

    <script>
        const msgList = {
            m1: "To My Gaggo. This is where it all started... (Aapka Msg 1)",
            m2: "All the memories I‚Äôve spent with you... (Aapka Msg 2)",
            m3: "Lastly, I want to say sorry... (Aapka Msg 3). Happy Anniversary! ü´Çüíó"
        };

        function createHeart() {
            const h = document.createElement('div'); h.className = 'heart-rain'; h.innerHTML = '‚ù§Ô∏è';
            h.style.left = Math.random() * 100 + 'vw'; h.style.animationDuration = (Math.random()*3+2)+'s';
            document.body.appendChild(h); setTimeout(() => h.remove(), 5000);
        }
        setInterval(createHeart, 300);

        function go() { document.getElementById("myMusic").play(); nxt('p1', 'v1', 'm1'); }
        function nxt(pId, vId, mId) {
            document.querySelectorAll('.part').forEach(p => p.classList.remove('active'));
            document.getElementById(pId).classList.add('active');
            let v = document.getElementById(vId); if(v) v.play();
            if(mId) type(mId, msgList[mId], mId === 'm3' ? () => document.getElementById('val-box').style.display='block' : null);
        }

        function type(id, text, cb) {
            let i = 0; let el = document.getElementById(id); el.innerHTML = "";
            function t() { if(i<text.length){ el.innerHTML += text.charAt(i); i++; setTimeout(t, 40); } else if(cb) cb(); } t();
        }

        function moveNo() {
            const b = document.getElementById('no-btn');
            b.style.left = Math.random()*70+'%'; b.style.top = Math.random()*70+'%';
        }

        /* Archery Game Logic */
        let score = 0;
        function startArchery() {
            document.getElementById('p3').style.display='none';
            document.getElementById('game-canvas').style.display='block';
            document.getElementById('game-ui').style.display='block';
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;

            let bowX = 50, bowY = canvas.height/2;
            let arrows = [], targets = [];
            let isDrawing = false;

            function spawnTarget() { 
                targets.push({ x: canvas.width - 80, y: Math.random()*(canvas.height-100)+50, r: 30 }); 
            }
            setInterval(spawnTarget, 2000);

            canvas.onmousedown = canvas.ontouchstart = () => isDrawing = true;
            canvas.onmouseup = canvas.ontouchend = (e) => {
                if(isDrawing) {
                    arrows.push({ x: bowX, y: bowY, speed: 10 });
                    isDrawing = false;
                }
            };

            function draw() {
                ctx.clearRect(0,0,canvas.width, canvas.height);
                // Draw Bow
                ctx.strokeStyle = "white"; ctx.lineWidth = 3;
                ctx.beginPath(); ctx.arc(bowX, bowY, 40, -Math.PI/2, Math.PI/2); ctx.stroke();
                
                // Arrows
                arrows.forEach((a, i) => {
                    a.x += a.speed; ctx.fillStyle = "white"; ctx.fillRect(a.x, a.y, 20, 2);
                    targets.forEach((t, ti) => {
                        let dist = Math.hypot(a.x - t.x, a.y - t.y);
                        if(dist < t.r) {
                            arrows.splice(i, 1); targets.splice(ti, 1);
                            score++; document.getElementById('score').innerText = score;
                            if(score >= 3) { setTimeout(win, 500); score = -99; }
                        }
                    });
                    if(a.x > canvas.width) arrows.splice(i, 1);
                });

                // Targets (Hearts)
                targets.forEach(t => { ctx.font = "40px serif"; ctx.fillText("‚ù§Ô∏è", t.x, t.y); });
                
                if(score < 3) requestAnimationFrame(draw);
            }
            draw();
        }

        function win() {
            document.getElementById('game-canvas').style.display='none';
            document.getElementById('game-ui').style.display='none';
            document.getElementById('final-coupon').style.display='block';
        }
    </script>
</body>
</html>
